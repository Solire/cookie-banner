!function(a){"use strict";function b(a,b){var c=!1,d=!0,e=a.document,f=e.documentElement,g=e.addEventListener?"addEventListener":"attachEvent",h=e.addEventListener?"removeEventListener":"detachEvent",i=e.addEventListener?"":"on",j=function(d){("readystatechange"!=d.type||"complete"==e.readyState)&&(("load"==d.type?a:e)[h](i+d.type,j,!1),!c&&(c=!0)&&b.call(a,d.type||d))},k=function(){try{f.doScroll("left")}catch(a){return void setTimeout(k,50)}j("poll")};if("complete"==e.readyState)b.call(a,"lazy");else{if(e.createEventObject&&f.doScroll){try{d=!a.frameElement}catch(l){}d&&k()}e[g](i+"DOMContentLoaded",j,!1),e[g](i+"readystatechange",j,!1),a[g](i+"load",j,!1)}}var c=a,d=c.document,e="cbinstance",f={get:function(a){return decodeURIComponent(d.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},set:function(a,b,c,e,f,g){if(!a||/^(?:expires|max\-age|path|domain|secure)$/i.test(a))return!1;var h="";if(c)switch(c.constructor){case Number:h=1/0===c?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+c;break;case String:h="; expires="+c;break;case Date:h="; expires="+c.toUTCString()}return d.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+h+(f?"; domain="+f:"")+(e?"; path="+e:"")+(g?"; secure":""),!0},has:function(a){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(d.cookie)},remove:function(a,b,c){return a&&this.has(a)?(d.cookie=encodeURIComponent(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(c?"; domain="+c:"")+(b?"; path="+b:""),!0):!1}},g={on:function(a,b,c){var d=a.addEventListener?"addEventListener":"attachEvent",e=a.addEventListener?"":"on";a[d](e+b,c,!1)},merge:function(){var a,b={},c=0,d=arguments.length;if(0===d)return b;for(;d>c;c++)for(a in arguments[c])Object.prototype.hasOwnProperty.call(arguments[c],a)&&(b[a]=arguments[c][a]);return b},str2bool:function(a){switch(a=""+a,a.toLowerCase()){case"false":case"no":case"0":case"":return!1;default:return!0}},fade_in:function(a){a.style.opacity<1&&(a.style.opacity=(parseFloat(a.style.opacity)+.05).toFixed(2),c.setTimeout(function(){g.fade_in(a)},50))},get_data_attribs:function(a){var b={};if(Object.prototype.hasOwnProperty.call(a,"dataset"))b=a.dataset;else{var c,d=a.attributes;for(c in d)if(Object.prototype.hasOwnProperty.call(d,c)){var e=d[c];if(/^data-/.test(e.name)){var f=g.camelize(e.name.substr(5));b[f]=e.value}}}return b},normalize_keys:function(a){var b={};for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=g.camelize(c);b[d]=a[d]?a[d]:a[c]}return b},camelize:function(a){for(var b="-",c=a.indexOf(b);-1!=c;){var d=c===a.length-1,e=d?"":a[c+1],f=e.toUpperCase(),g=d?b:b+e;a=a.replace(g,f),c=a.indexOf(b)}return a},find_script_by_id:function(a){for(var b=d.getElementsByTagName("script"),c=0,e=b.length;e>c;c++)if(a===b[c].id)return b[c];return null}},h=g.find_script_by_id("cookiebanner"),i=function(a){this.init(a)};i.prototype={options:{},inputs:[],focusable:[],cookiejar:f,allowed:0,allowedBinary:"000",askBinary:"000",info:null,a:null,configure:null,steps:[],currentStep:-1,agreeValue:{audience:1,social:2,pub:4},agreeReplace:{audience:/^(..)(.)()$/,social:/^(.)(.)(.)$/,pub:/^()(.)(..)$/},agreeMask:{audience:"..1",social:".1.",pub:"1.."},add:function(a){this.allowed+=this.agreeValue[a],this.save()},set:function(a){this.allowed=a,this.save()},save:function(){this.setCookie(this.allowed)},decodeAllowed:function(a){return("000"+parseInt(a).toString(2)).substr(-3)},isAllowed:function(a,b){var c;return a in this.agreeMask?(c=new RegExp(this.agreeMask[a]),c.test(b)):!1},addQuestion:function(a){var b,c,e,f,h,i,j,k,l,m=this,n=d.createElement("form"),o=d.createTextNode(this.options[a]),p=[],q=[];return b=d.createElement("div"),b.className=m.options.className+"-question",l=d.createElement("div"),k=d.createElement("input"),k.type="button",k.value=this.options.ok,m.options.inlinestyle&&(k.style.background="none repeat scroll 0 0 #000",k.style.border="1px solid "+this.options.fg,k.style.color=this.options.fg),l.style.display="inline-block",l.appendChild(k),f=d.createElement("input"),h=d.createElement("input"),f.type=h.type="radio",f.name=h.name="cookiebanner-"+a,f.id="cookiebanner-"+a+"-yes",h.id="cookiebanner-"+a+"-no",g.on(k,"click",function(){f.checked?m.add(a):m.save(),m.nextStep()}),c=d.createElement("label"),c.innerHTML=this.options.yes,c.htmlFor=f.id,e=d.createElement("label"),e.innerHTML=this.options.no,e.htmlFor=h.id,b.style.display="none",b.setAttribute("aria-hidden",!0),n.appendChild(o),i=d.createElement("div"),j=d.createElement("div"),m.options.inlinestyle&&(i.style.padding=j.style.padding="5px 16px"),i.style.display="inline-block",i.appendChild(c),i.appendChild(f),n.appendChild(i),j.style.display="inline-block",j.appendChild(e),j.appendChild(h),n.appendChild(j),n.appendChild(l),b.appendChild(n),q.push(c),q.push(f),q.push(e),q.push(h),q.push(k),this.focusable.push(q),p.push(f),p.push(h),this.inputs.push(p),this.steps.push(b),b},addAnswer:function(a){var b,c,e,f,h,i=this,j=[],k=[];return b=d.createElement("div"),b.className=i.options.className+"-answer",f=d.createElement("div"),f.className=i.options.className+"-validate",e=d.createElement("input"),e.type="button",i.options.inlinestyle&&(e.value=this.options.continue,e.style.background="none repeat scroll 0 0 transparent",e.style.border="1px solid "+this.options.fg,e.style.color=this.options.fg,f.style.display="inline-block"),f.appendChild(e),k.push(e),this.inputs.push(j),this.focusable.push(k),c=d.createElement("p"),c.className=i.options.className+"-message",c.style.padding="5px 16px",c.innerHTML=this.options[a+"Answer"],c.style.display="inline-block",h=d.createElement("form"),h.appendChild(c),h.appendChild(f),b.appendChild(h),b.style.display="none",b.setAttribute("aria-hidden",!0),g.on(e,"click",function(){i.nextStep()}),i.steps.push(b),b},nextStep:function(){var a,b,c;if(this.currentStep>-1){for(a=this.steps[this.currentStep],a.style.display="none",a.setAttribute("aria-hidden",!0),b=0;b<this.inputs[this.currentStep].length;b++)this.inputs[this.currentStep][b].checked=!1;for(c=0;c<this.focusable[this.currentStep].length;c++)this.focusable[this.currentStep][c].tabIndex=-1}else this.info.style.display="none",this.info.setAttribute("aria-hidden",!0),null!==this.a&&(this.a.tabIndex=-1),this.configure.tabIndex=-1;if(this.currentStep++,this.currentStep<this.steps.length){for(a=this.steps[this.currentStep],a.style.display="inline",a.setAttribute("aria-hidden",!1),console.log("aaa",this.inputs[this.currentStep]),b=0;b<this.inputs[this.currentStep].length;b++)this.inputs[this.currentStep][b].checked=!1;for(this.focusable[this.currentStep].length>0&&this.focusable[this.currentStep][0].focus(),c=0;c<this.focusable[this.currentStep].length;c++)this.focusable[this.currentStep][c].tabIndex=0}else this.info.style.display="inline",this.info.setAttribute("aria-hidden",!1),null!==this.a?(this.a.tabIndex=0,this.a.focus()):this.configure.focus(),this.configure.tabIndex=0,this.currentStep=-1},visit:function(){return this.cookiejar.set(this.options.cookie,-1,300,this.options.cookiePath),!0},visited:function(){return this.hasCookie()&&-1==this.getCookie()&&!this.onMoreInfoPage()},agree:function(){return this.set(7),!0},agreed:function(){return this.getCookie()>-1},hasCookie:function(){return this.cookiejar.has(this.options.cookie)},getCookie:function(){return parseInt(this.cookiejar.get(this.options.cookie))},setCookie:function(a){return this.cookiejar.set(this.options.cookie,a,this.options.expires,this.options.cookiePath),!0},removeCookie:function(){return this.cookiejar.remove(this.options.cookie,this.options.cookiePath),!0},init:function(b){this.inserted=!1,this.closed=!1,this.test_mode=!1;var c="Acceptez-vous d'être suivi(e) par notre outils de mesure d'audience ?",d="Acceptez-vous d'être suivi(e) par notre outils de partage sur les réseaux sociaux ?",f="Acceptez-vous d'être suivi(e) par nos fournisseurs de publicité ?",i="Votre paramétrage sur les outils de mesure d'audience a été enregistré.",j="Votre paramétrage sur les outils de partage sur les réseaux sociaux.",k="Votre paramétrage sur le suivi de nos fournisseurs de publicité.",l="Consulter la page concernant les Cookies.",m="Fermer le bandeau et accepter les Cookies.",n="Paramétrer l'acceptation des Cookies.",o="Nous utilisons des cookies afin d'établir des statistiques de fréquentation du site et vous permettre le partage sur les réseaux sociaux. En poursuivant votre navigation sur ce site, vous acceptez notre utilisation des cookies.",p="En savoir plus",q="Quitter le paramétrage";if(this.default_options={debug:!1,className:"cookiebanner",inlinestyle:!1,cookie:"cookiebanner-accepted",closeText:"✖",cookiePath:"/",debug:!1,expires:function(){var a=13,b=new Date;return b.setMonth(b.getMonth()+a),b},zindex:255,mask:!1,maskOpacity:.5,maskBackground:"#000",height:"auto",minHeight:"21px",bg:"#000",fg:"#ddd",link:"#aaa",position:"bottom",moreinfo:!1,canconfigure:!1,message:o,linkmsg:p,linkTitle:l,closeTitle:m,ok:"Valider","continue":"Continuer",configure:"Paramétrer",configureTitle:n,quit:"Quitter",quitTitle:q,audience:c,audienceAnswer:i,social:d,socialAnswer:j,pub:f,pubAnswer:k,yes:"Oui",no:"Non",ask:"0",effect:null,fontSize:"14px",fontFamily:"arial, sans-serif",instance:e},this.options=this.default_options,this.script_el=h,this.script_el){var r=g.get_data_attribs(this.script_el);this.options=g.merge(this.options,r)}b&&(b=g.normalize_keys(b),this.options=g.merge(this.options,b)),e=this.options.instance,this.options.zindex=parseInt(this.options.zindex,10),this.options.mask=g.str2bool(this.options.mask),"string"==typeof this.options.expires&&"function"==typeof a[this.options.expires]&&(this.options.expires=a[this.options.expires]),"function"==typeof this.options.expires&&(this.options.expires=this.options.expires()),this.script_el&&this.run()},log:function(){"undefined"!=typeof console&&console.log.apply(console,arguments)},onMoreInfoPage:function(){return document.location.href===this.options.moreinfo},run:function(){var d=this;d.visited()&&d.agree(),(!d.agreed()||d.onMoreInfoPage()||d.options.debug)&&(d.visit(),b(c,function(){d.insert()})),d.askBinary=d.decodeAllowed(d.options.ask),d.allowed=d.hasCookie()&&d.getCookie()>-1?d.getCookie():0,d.allowedBinary=d.decodeAllowed(d.allowed),a.Cookiebanner={isAllowed:function(a){return d.isAllowed(a,d.allowedBinary)},reset:function(){return d.removeCookie()}}},close:function(){return this.inserted&&(this.closed||(this.element&&d.body.removeChild(this.element),this.element_mask&&d.body.removeChild(this.element_mask),this.closed=!0)),this.closed},agree_and_close:function(){return this.agree(),this.close()},cleanup:function(){return this.close(),this.unload()},unload:function(){return this.script_el&&this.script_el.parentNode.removeChild(this.script_el),a[e]=void 0,!0},insert:function(){var a,b,c,e=this;a=e.options.zindex,e.element=d.createElement("div"),e.element.className=e.options.className,e.options.inlinestyle&&(e.element.style.position="fixed",e.element.style.left=0,e.element.style.right=0,e.element.style.height=e.options.height,e.element.style.minHeight=e.options.minHeight,e.element.style.zIndex=a,e.element.style.background=e.options.bg,e.element.style.color=e.options.fg,e.element.style.lineHeight=e.element.style.minHeight,e.element.style.padding="5px 16px",e.element.style.fontFamily=e.options.fontFamily,e.element.style.fontSize=e.options.fontSize,"top"===e.options.position?e.element.style.top=0:e.element.style.bottom=0),b=d.createElement("input"),b.type="button",b.className=e.options.className+"-close",b.title=e.options.closeTitle,b.value=e.options.closeText,b.tabIndex=0,e.options.inlinestyle&&(b.style.cursor="pointer",b.style.padding="5px",b.style.background="none repeat scroll 0 0 #000",b.style.border="medium none",b.style.cssFloat="right",b.style.color=e.options.link),g.on(b,"click",function(){e.agree_and_close()}),e.info=d.createElement("span"),e.info.className=e.options.className+"-info",e.info.innerHTML=e.options.message,e.options.moreinfo&&!e.onMoreInfoPage()&&(e.a=d.createElement("a"),e.a.className=e.options.className+"-moreinfo",e.a.title=e.options.linkTitle,e.a.href=e.options.moreinfo,e.a.innerHTML=e.options.linkmsg,e.options.inlinestyle&&(e.a.style.textDecoration="none",e.a.style.color=e.options.link,e.a.style.padding="0 5px"),e.info.appendChild(e.a),e.options.canconfigure&&(c=d.createElement("span"),c.className=e.options.className+"-pipe",e.options.inlinestyle&&(c.style.color=e.options.link),c.innerHTML="|",e.info.appendChild(c))),e.options.canconfigure&&(e.configure=d.createElement("input"),e.configure.type="button",e.configure.className=e.options.className+"-configure",e.configure.title=e.options.configureTitle,e.configure.value=e.options.configure,e.options.inlinestyle&&(e.configure.style.cursor="pointer",e.configure.style.padding="0 5px",e.configure.style.background="none repeat scroll 0 0 #000",e.configure.style.border="medium none",e.configure.style.color=e.options.link),e.info.appendChild(e.configure)),e.element.appendChild(e.info);for(name in e.agreeMask)e.isAllowed(name,e.askBinary)&&(e.element.appendChild(e.addQuestion(name)),e.element.appendChild(e.addAnswer(name)));e.element.appendChild(b),e.options.canconfigure&&g.on(e.configure,"click",function(){e.allowed=0,e.save(),e.nextStep()}),d.body.insertBefore(e.element,d.body.children[0]),e.inserted=!0,e.options.moreinfo&&(e.onMoreInfoPage()?(e.configure.focus(),e.configure.tabIndex=0):(e.a.focus(),e.a.tabIndex=0,e.configure.tabIndex=0)),"fade"===e.options.effect?(e.element.style.opacity=0,g.fade_in(e.element)):e.element.style.opacity=1}},h&&(a[e]||(a[e]=new i))}(window);